{"ast":null,"code":"import Vue from 'vue';\nimport VueRouter from 'vue-router'; // import HomeView from '../views/HomeView.vue'\n\nimport user from \"@/store/user\";\nVue.use(VueRouter);\nconst routes = [{\n  path: '/',\n  name: 'home',\n  component: () => import('../views/HomePage.vue'),\n  children: [{\n    path: '/Login',\n    name: 'Login',\n    component: () => import('../views/Login')\n  }, {\n    path: '/FirstPage',\n    name: 'FirstPage',\n    component: () => import('../views/FirstPage')\n  }, {\n    path: '/Mall',\n    name: 'Mall',\n    component: () => import('../views/mall.vue')\n  }, {\n    path: '/UserManage',\n    name: 'User',\n    component: () => import('../views/User')\n  }, {\n    path: '/filter',\n    name: 'Filter',\n    component: () => import('../views/filter.vue')\n  }]\n} // {\n//     path: '/self',\n//     name: 'Self',\n//     component: () =>\n//         import ('../views/self.vue'),\n//     meta: {\n//         requireAuth: true\n//     }\n// },\n// {\n//     path: '/about',\n//     name: 'about',\n//     // route level code-splitting\n//     // this generates a separate chunk (about.[hash].js) for this route\n//     // which is lazy-loaded when the route is visited.\n//     component: () =>\n//         import ( /* webpackChunkName: \"about\" */ '../views/AboutView.vue')\n// }\n];\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n});\nrouter.beforeEach((to, from, next) => {\n  // 通过 Vuex 获取用户登录信息\n  const userInfo = user.getters.getUser(user.state()); // 若前往的是登录路由，则保存当前路由到 preRoute 的键值对中，以便登录成功后跳转\n\n  if (to.path === '/login') {\n    localStorage.setItem(\"preRoute\", router.currentRoute.fullPath);\n  } // 若用户未登录且访问的页面需要登录，则跳转至登录页面\n\n\n  if (!userInfo && to.meta.requireAuth) {\n    next({\n      name: 'login'\n    });\n  }\n\n  next();\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","user","use","routes","path","name","component","children","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","userInfo","getters","getUser","state","localStorage","setItem","currentRoute","fullPath","meta","requireAuth"],"sources":["D:/vue/project_test/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\n// import HomeView from '../views/HomeView.vue'\nimport user from \"@/store/user\";\nVue.use(VueRouter)\n\nconst routes = [{\n        path: '/',\n        name: 'home',\n        component: () =>\n            import ('../views/HomePage.vue'),\n        children: [{\n            path: '/Login',\n            name: 'Login',\n            component: () =>\n                import ('../views/Login')\n        }, {\n            path: '/FirstPage',\n            name: 'FirstPage',\n            component: () =>\n                import ('../views/FirstPage')\n        }, {\n            path: '/Mall',\n            name: 'Mall',\n            component: () =>\n                import ('../views/mall.vue')\n        }, {\n            path: '/UserManage',\n            name: 'User',\n            component: () =>\n                import ('../views/User')\n        }, {\n            path: '/filter',\n            name: 'Filter',\n            component: () =>\n                import ('../views/filter.vue')\n        }, ]\n    },\n\n    // {\n    //     path: '/self',\n    //     name: 'Self',\n    //     component: () =>\n    //         import ('../views/self.vue'),\n    //     meta: {\n    //         requireAuth: true\n    //     }\n    // },\n    // {\n    //     path: '/about',\n    //     name: 'about',\n    //     // route level code-splitting\n    //     // this generates a separate chunk (about.[hash].js) for this route\n    //     // which is lazy-loaded when the route is visited.\n    //     component: () =>\n    //         import ( /* webpackChunkName: \"about\" */ '../views/AboutView.vue')\n    // }\n]\n\nconst router = new VueRouter({\n    mode: 'history',\n    base: process.env.BASE_URL,\n    routes\n})\nrouter.beforeEach((to, from, next) => {\n    // 通过 Vuex 获取用户登录信息\n    const userInfo = user.getters.getUser(user.state());\n\n    // 若前往的是登录路由，则保存当前路由到 preRoute 的键值对中，以便登录成功后跳转\n    if (to.path === '/login') {\n        localStorage.setItem(\"preRoute\", router.currentRoute.fullPath);\n    }\n\n    // 若用户未登录且访问的页面需要登录，则跳转至登录页面\n    if (!userInfo && to.meta.requireAuth) {\n        next({\n            name: 'login',\n        })\n    }\n\n    next()\n})\nexport default router"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB,C,CACA;;AACA,OAAOC,IAAP,MAAiB,cAAjB;AACAF,GAAG,CAACG,GAAJ,CAAQF,SAAR;AAEA,MAAMG,MAAM,GAAG,CAAC;EACRC,IAAI,EAAE,GADE;EAERC,IAAI,EAAE,MAFE;EAGRC,SAAS,EAAE,MACP,OAAQ,uBAAR,CAJI;EAKRC,QAAQ,EAAE,CAAC;IACPH,IAAI,EAAE,QADC;IAEPC,IAAI,EAAE,OAFC;IAGPC,SAAS,EAAE,MACP,OAAQ,gBAAR;EAJG,CAAD,EAKP;IACCF,IAAI,EAAE,YADP;IAECC,IAAI,EAAE,WAFP;IAGCC,SAAS,EAAE,MACP,OAAQ,oBAAR;EAJL,CALO,EAUP;IACCF,IAAI,EAAE,OADP;IAECC,IAAI,EAAE,MAFP;IAGCC,SAAS,EAAE,MACP,OAAQ,mBAAR;EAJL,CAVO,EAeP;IACCF,IAAI,EAAE,aADP;IAECC,IAAI,EAAE,MAFP;IAGCC,SAAS,EAAE,MACP,OAAQ,eAAR;EAJL,CAfO,EAoBP;IACCF,IAAI,EAAE,SADP;IAECC,IAAI,EAAE,QAFP;IAGCC,SAAS,EAAE,MACP,OAAQ,qBAAR;EAJL,CApBO;AALF,CAAD,CAiCX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlDW,CAAf;AAqDA,MAAME,MAAM,GAAG,IAAIR,SAAJ,CAAc;EACzBS,IAAI,EAAE,SADmB;EAEzBC,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAFO;EAGzBV;AAHyB,CAAd,CAAf;AAKAK,MAAM,CAACM,UAAP,CAAkB,CAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,KAAoB;EAClC;EACA,MAAMC,QAAQ,GAAGjB,IAAI,CAACkB,OAAL,CAAaC,OAAb,CAAqBnB,IAAI,CAACoB,KAAL,EAArB,CAAjB,CAFkC,CAIlC;;EACA,IAAIN,EAAE,CAACX,IAAH,KAAY,QAAhB,EAA0B;IACtBkB,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCf,MAAM,CAACgB,YAAP,CAAoBC,QAArD;EACH,CAPiC,CASlC;;;EACA,IAAI,CAACP,QAAD,IAAaH,EAAE,CAACW,IAAH,CAAQC,WAAzB,EAAsC;IAClCV,IAAI,CAAC;MACDZ,IAAI,EAAE;IADL,CAAD,CAAJ;EAGH;;EAEDY,IAAI;AACP,CAjBD;AAkBA,eAAeT,MAAf"},"metadata":{},"sourceType":"module"}