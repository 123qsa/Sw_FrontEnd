{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport Vue from 'vue';\nimport VueRouter from 'vue-router'; // import HomeView from '../views/HomeView.vue'\n\nimport user from \"@/store/user\";\nVue.use(VueRouter);\nvar routes = [{\n  path: '/',\n  name: 'home',\n  component: function component() {\n    return import('../views/HomePage.vue');\n  }\n}, {\n  path: '/Login',\n  name: 'Login',\n  component: function component() {\n    return import('../views/Login.vue');\n  }\n}, {\n  path: '/Mall',\n  name: 'Mall',\n  component: function component() {\n    return import('../views/Mall.vue');\n  }\n} // {\n//     path: '/self',\n//     name: 'Self',\n//     component: () =>\n//         import ('../views/self.vue'),\n//     meta: {\n//         requireAuth: true\n//     }\n// },\n// {\n//     path: '/about',\n//     name: 'about',\n//     // route level code-splitting\n//     // this generates a separate chunk (about.[hash].js) for this route\n//     // which is lazy-loaded when the route is visited.\n//     component: () =>\n//         import ( /* webpackChunkName: \"about\" */ '../views/AboutView.vue')\n// }\n];\nvar router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes: routes\n});\nrouter.beforeEach(function (to, from, next) {\n  // 通过 Vuex 获取用户登录信息\n  var userInfo = user.getters.getUser(user.state()); // 若前往的是登录路由，则保存当前路由到 preRoute 的键值对中，以便登录成功后跳转\n\n  if (to.path === '/login') {\n    localStorage.setItem(\"preRoute\", router.currentRoute.fullPath);\n  } // 若用户未登录且访问的页面需要登录，则跳转至登录页面\n\n\n  if (!userInfo && to.meta.requireAuth) {\n    next({\n      name: 'login'\n    });\n  }\n\n  next();\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","user","use","routes","path","name","component","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","userInfo","getters","getUser","state","localStorage","setItem","currentRoute","fullPath","meta","requireAuth"],"sources":["D:/vue/project_test/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\n// import HomeView from '../views/HomeView.vue'\nimport user from \"@/store/user\";\nVue.use(VueRouter)\n\nconst routes = [{\n        path: '/',\n        name: 'home',\n        component: () =>\n            import ('../views/HomePage.vue')\n    },\n    {\n        path: '/Login',\n        name: 'Login',\n        component: () =>\n            import ('../views/Login.vue')\n    },\n    {\n        path: '/Mall',\n        name: 'Mall',\n        component: () =>\n            import ('../views/Mall.vue')\n    },\n    // {\n    //     path: '/self',\n    //     name: 'Self',\n    //     component: () =>\n    //         import ('../views/self.vue'),\n    //     meta: {\n    //         requireAuth: true\n    //     }\n    // },\n    // {\n    //     path: '/about',\n    //     name: 'about',\n    //     // route level code-splitting\n    //     // this generates a separate chunk (about.[hash].js) for this route\n    //     // which is lazy-loaded when the route is visited.\n    //     component: () =>\n    //         import ( /* webpackChunkName: \"about\" */ '../views/AboutView.vue')\n    // }\n]\n\nconst router = new VueRouter({\n    mode: 'history',\n    base: process.env.BASE_URL,\n    routes\n})\nrouter.beforeEach((to, from, next) => {\n    // 通过 Vuex 获取用户登录信息\n    const userInfo = user.getters.getUser(user.state());\n\n    // 若前往的是登录路由，则保存当前路由到 preRoute 的键值对中，以便登录成功后跳转\n    if (to.path === '/login') {\n        localStorage.setItem(\"preRoute\", router.currentRoute.fullPath);\n    }\n\n    // 若用户未登录且访问的页面需要登录，则跳转至登录页面\n    if (!userInfo && to.meta.requireAuth) {\n        next({\n            name: 'login',\n        })\n    }\n\n    next()\n})\nexport default router"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB,C,CACA;;AACA,OAAOC,IAAP,MAAiB,cAAjB;AACAF,GAAG,CAACG,GAAJ,CAAQF,SAAR;AAEA,IAAMG,MAAM,GAAG,CAAC;EACRC,IAAI,EAAE,GADE;EAERC,IAAI,EAAE,MAFE;EAGRC,SAAS,EAAE;IAAA,OACP,OAAQ,uBAAR,CADO;EAAA;AAHH,CAAD,EAMX;EACIF,IAAI,EAAE,QADV;EAEIC,IAAI,EAAE,OAFV;EAGIC,SAAS,EAAE;IAAA,OACP,OAAQ,oBAAR,CADO;EAAA;AAHf,CANW,EAYX;EACIF,IAAI,EAAE,OADV;EAEIC,IAAI,EAAE,MAFV;EAGIC,SAAS,EAAE;IAAA,OACP,OAAQ,mBAAR,CADO;EAAA;AAHf,CAZW,CAkBX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnCW,CAAf;AAsCA,IAAMC,MAAM,GAAG,IAAIP,SAAJ,CAAc;EACzBQ,IAAI,EAAE,SADmB;EAEzBC,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAFO;EAGzBT,MAAM,EAANA;AAHyB,CAAd,CAAf;AAKAI,MAAM,CAACM,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;EAClC;EACA,IAAMC,QAAQ,GAAGhB,IAAI,CAACiB,OAAL,CAAaC,OAAb,CAAqBlB,IAAI,CAACmB,KAAL,EAArB,CAAjB,CAFkC,CAIlC;;EACA,IAAIN,EAAE,CAACV,IAAH,KAAY,QAAhB,EAA0B;IACtBiB,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCf,MAAM,CAACgB,YAAP,CAAoBC,QAArD;EACH,CAPiC,CASlC;;;EACA,IAAI,CAACP,QAAD,IAAaH,EAAE,CAACW,IAAH,CAAQC,WAAzB,EAAsC;IAClCV,IAAI,CAAC;MACDX,IAAI,EAAE;IADL,CAAD,CAAJ;EAGH;;EAEDW,IAAI;AACP,CAjBD;AAkBA,eAAeT,MAAf"},"metadata":{},"sourceType":"module"}